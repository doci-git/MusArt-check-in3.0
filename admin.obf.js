(function(s){try{(0,eval)(atob(s));}catch(e){console.error('obf error',e);}})('KCgpID0+IHsNCiAgInVzZSBzdHJpY3QiOw0KDQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAvLyBDT05GSUdVUkFaSU9ORSBFIElOSVpJQUxJWlpBWklPTkUNCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogIGNvbnN0IGZpcmViYXNlQ29uZmlnID0gew0KICAgIGFwaUtleTogIkFJemFTeUN1eTNTYWs5NnNvQ2xhN2I1WWI1d21rZFZmTXFBWG1vayIsDQogICAgYXV0aERvbWFpbjogImNoZWNrLWluLTRlMGU5LmZpcmViYXNlYXBwLmNvbSIsDQogICAgZGF0YWJhc2VVUkw6DQogICAgICAiaHR0cHM6Ly9jaGVjay1pbi00ZTBlOS1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwIiwNCiAgICBwcm9qZWN0SWQ6ICJjaGVjay1pbi00ZTBlOSIsDQogICAgc3RvcmFnZUJ1Y2tldDogImNoZWNrLWluLTRlMGU5LmZpcmViYXNlc3RvcmFnZS5hcHAiLA0KICAgIG1lc3NhZ2luZ1NlbmRlcklkOiAiNzIzODgwOTkwMTc3IiwNCiAgICBhcHBJZDogIjE6NzIzODgwOTkwMTc3OndlYjpmMDAyNzMzYjJjYzJlNTBkMTcyZWEwIiwNCiAgICBtZWFzdXJlbWVudElkOiAiRy1IOTdHQjlMNEY1IiwNCiAgfTsNCg0KICAvLyBWYWxvcmkgZGkgZmFsbGJhY2sgKHBvc3Nvbm8gZXNzZXJlIHNvdnJhc2NyaXR0aSBkYSBzZXR0aW5ncyBGaXJlYmFzZSkNCiAgbGV0IEFETUlOX1BBU1NXT1JEID0gIiI7DQogIGNvbnN0IFNIRUxMWV9BUElfVVJMID0NCiAgICAiaHR0cHM6Ly9zaGVsbHktNzMtZXUuc2hlbGx5LmNsb3VkL3YyL2RldmljZXMvYXBpL3NldC9zd2l0Y2giOw0KDQogIC8vIFNlZ3JldG8gcGVyIGhhc2g6IHB1w4PCsiBlc3NlcmUgc292cmFzY3JpdHRvIGRhIHNldHRpbmdzL2FkbWluX3NlY3JldA0KICBsZXQgQURNSU5fU0VDUkVUID0gImFkbWluX2xvY2FsX3NlY3JldF9zdHJvbmdfIUAjMjAyNSI7DQoNCiAgLy8gQ29uZmlndXJhemlvbmUgZGlzcG9zaXRpdmkgU2hlbGx5DQogIGNvbnN0IEFETUlOX0RFVklDRVMgPSBPYmplY3QuZnJlZXplKFsKICAgIHsKICAgICAgaWQ6ICJlNGIwNjNmMGMzOGMiLAogICAgICBhdXRoX2tleToKICAgICAgICAiTVdJMk1EYzRkV2xrNDkwOEE3MURBODA5RkNFQzA1QzVEMUYzNjA5NDNGQkZDNkE3OTM0RUMwRkQ5RTNDRkVBRjAzRjhGNUE2QTRBMEM2MDY2NUI5N0ExQUEyRTIiLAogICAgICBidXR0b25faWQ6ICJidG5PcGVuTWFpbkRvb3IiLAogICAgICBzdGF0dXNfaWQ6ICJtYWluRG9vclN0YXR1cyIsCiAgICAgIHN0YXR1c190ZXh0X2lkOiAibWFpbkRvb3JTdGF0dXNUZXh0IiwKICAgICAgcmVzdWx0X2lkOiAibWFpbkRvb3JSZXN1bHQiLAogICAgICBuYW1lOiAiUG9ydGEgUHJpbmNpcGFsZSIsCiAgICB9LA0KICAgIHsNCiAgICAgIGlkOiAiMzQ5NDU0NzhkNTk1IiwNCiAgICAgIGF1dGhfa2V5Og0KICAgICAgICAiTVdJMk1EYzRkV2xrNDkwOEE3MURBODA5RkNFQzA1QzVEMUYzNjA5NDNGQkZDNkE3OTM0RUMwRkQ5RTNDRkVBRjAzRjhGNUE2QTRBMEM2MDY2NUI5N0ExQUEyRTIiLA0KICAgICAgYnV0dG9uX2lkOiAiYnRuT3BlbkFwdERvb3IiLA0KICAgICAgc3RhdHVzX2lkOiAiYXB0RG9vclN0YXR1cyIsDQogICAgICBzdGF0dXNfdGV4dF9pZDogImFwdERvb3JTdGF0dXNUZXh0IiwNCiAgICAgIHJlc3VsdF9pZDogImFwdERvb3JSZXN1bHQiLA0KICAgICAgbmFtZTogIlBvcnRhIEFwcGFydGFtZW50byIsDQogICAgfSwNCiAgICB7DQogICAgICBpZDogIjM0OTQ1NDdhYjE2MSIsDQogICAgICBhdXRoX2tleToNCiAgICAgICAgIk1XSTJNRGM0ZFdsazQ5MDhBNzFEQTgwOUZDRUMwNUM1RDFGMzYwOTQzRkJGQzZBNzkzNEVDMEZEOUUzQ0ZFQUYwM0Y4RjVBNkE0QTBDNjA2NjVCOTdBMUFBMkUyIiwNCiAgICAgIGJ1dHRvbl9pZDogImJ0bk9wZW5FeHRyYURvb3IxIiwNCiAgICAgIHN0YXR1c19pZDogImV4dHJhRG9vcjFTdGF0dXMiLA0KICAgICAgc3RhdHVzX3RleHRfaWQ6ICJleHRyYURvb3IxU3RhdHVzVGV4dCIsDQogICAgICByZXN1bHRfaWQ6ICJleHRyYURvb3IxUmVzdWx0IiwNCiAgICAgIG5hbWU6ICJQb3J0YSBFeHRyYSAxIiwNCiAgICAgIGNvbnRhaW5lcl9pZDogImV4dHJhRG9vcjFBZG1pbiIsDQogICAgfSwNCiAgICB7DQogICAgICBpZDogInBsYWNlaG9sZGVyX2lkXzIiLA0KICAgICAgYXV0aF9rZXk6ICJwbGFjZWhvbGRlcl9hdXRoX2tleV8yIiwNCiAgICAgIGJ1dHRvbl9pZDogImJ0bk9wZW5FeHRyYURvb3IyIiwNCiAgICAgIHN0YXR1c19pZDogImV4dHJhRG9vcjJTdGF0dXMiLA0KICAgICAgc3RhdHVzX3RleHRfaWQ6ICJleHRyYURvb3IyU3RhdHVzVGV4dCIsDQogICAgICByZXN1bHRfaWQ6ICJleHRyYURvb3IyUmVzdWx0IiwNCiAgICAgIG5hbWU6ICJQb3J0YSBFeHRyYSAyIiwNCiAgICAgIGNvbnRhaW5lcl9pZDogImV4dHJhRG9vcjJBZG1pbiIsDQogICAgfSwNCiAgXSk7DQoNCiAgLy8gSW5pemlhbGl6emEgRmlyZWJhc2UgKHNlIG5vbiBnacODwqAgaW5pemlhbGl6emF0byBhbHRyb3ZlKQ0KICBpZiAoIWZpcmViYXNlLmFwcHMgfHwgZmlyZWJhc2UuYXBwcy5sZW5ndGggPT09IDApIHsNCiAgICBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsNCiAgfQ0KICBjb25zdCBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7DQogIC8vIFJlbmRpIGxhIHNlc3Npb25lIHBlcnNpc3RlbnRlIHRyYSBpIHJlbG9hZCBkZWwgYnJvd3Nlcg0KICB0cnkgew0KICAgIGZpcmViYXNlLmF1dGgoKS5zZXRQZXJzaXN0ZW5jZShmaXJlYmFzZS5hdXRoLkF1dGguUGVyc2lzdGVuY2UuTE9DQUwpOw0KICB9IGNhdGNoIChlKSB7DQogICAgY29uc29sZS53YXJuKCJJbXBvc3NpYmlsZSBpbXBvc3RhcmUgbGEgcGVyc2lzdGVuemEgQXV0aDoiLCBlKTsNCiAgfQ0KDQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAvLyBVVElMUw0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgZnVuY3Rpb24gcXMoaWQpIHsNCiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICB9DQogIGZ1bmN0aW9uIG9uKGlkLCBldnQsIGhhbmRsZXIpIHsNCiAgICBjb25zdCBlbCA9IHFzKGlkKTsNCiAgICBpZiAoZWwpIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZ0LCBoYW5kbGVyKTsNCiAgfQ0KICBmdW5jdGlvbiBmbXREYXRlVGltZShtcykgew0KICAgIHRyeSB7DQogICAgICByZXR1cm4gbmV3IERhdGUobXMpLnRvTG9jYWxlU3RyaW5nKCJpdC1JVCIpOw0KICAgIH0gY2F0Y2ggew0KICAgICAgcmV0dXJuICIiICsgbXM7DQogICAgfQ0KICB9DQogIGFzeW5jIGZ1bmN0aW9uIHNoYTI1NihzdHIpIHsNCiAgICBjb25zdCBlbmMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc3RyKTsNCiAgICBjb25zdCBidWYgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgiU0hBLTI1NiIsIGVuYyk7DQogICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoYnVmKSkNCiAgICAgIC5tYXAoKGIpID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICIwIikpDQogICAgICAuam9pbigiIik7DQogIH0NCiAgZnVuY3Rpb24gYWxlcnRPbmNlKG1zZykgew0KICAgIC8vIHdyYXBwZXIgc2VtcGxpY2UgcGVyIGV2ZW50dWFsZSBmdXR1cmEgc29zdGl0dXppb25lIGNvbiB0b2FzdA0KICAgIHdpbmRvdy5hbGVydChtc2cpOw0KICB9DQoNCiAgLy8gRmV0Y2ggY29uIHRpbWVvdXQgKEFib3J0Q29udHJvbGxlcikNCiAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hXaXRoVGltZW91dCh1cmwsIG9wdGlvbnMgPSB7fSwgdGltZW91dE1zID0gMTAwMDApIHsNCiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAgIGNvbnN0IGlkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHRpbWVvdXRNcyk7DQogICAgdHJ5IHsNCiAgICAgIHJldHVybiBhd2FpdCBmZXRjaCh1cmwsIHsgLi4ub3B0aW9ucywgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCB9KTsNCiAgICB9IGZpbmFsbHkgew0KICAgICAgY2xlYXJUaW1lb3V0KGlkKTsNCiAgICB9DQogIH0NCg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgLy8gQVVURU5USUNBWklPTkUgQURNSU4gKEZpcmViYXNlIEVtYWlsL1Bhc3N3b3JkKQ0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgY29uc3QgYWxsb3dlZEFkbWluRW1haWxzID0gbmV3IFNldCgpOw0KDQogIGFzeW5jIGZ1bmN0aW9uIGxvYWRBbGxvd2VkQWRtaW5FbWFpbHMoKSB7DQogICAgdHJ5IHsNCiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBkYXRhYmFzZS5yZWYoInNldHRpbmdzL2FkbWluX2VtYWlscyIpLm9uY2UoInZhbHVlIik7DQogICAgICBjb25zdCB2YWwgPSBzbmFwPy52YWwoKTsNCiAgICAgIGFsbG93ZWRBZG1pbkVtYWlscy5jbGVhcigpOw0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkgew0KICAgICAgICB2YWwNCiAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pDQogICAgICAgICAgLmZvckVhY2goKGUpID0+IGFsbG93ZWRBZG1pbkVtYWlscy5hZGQoU3RyaW5nKGUpLnRvTG93ZXJDYXNlKCkpKTsNCiAgICAgIH0gZWxzZSBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICJvYmplY3QiKSB7DQogICAgICAgIE9iamVjdC5rZXlzKHZhbCkuZm9yRWFjaCgoaykgPT4gew0KICAgICAgICAgIGlmICh2YWxba10pIGFsbG93ZWRBZG1pbkVtYWlscy5hZGQoU3RyaW5nKGspLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9IGNhdGNoIChlKSB7DQogICAgICBjb25zb2xlLndhcm4oIkltcG9zc2liaWxlIGNhcmljYXJlIGFkbWluX2VtYWlscyBkYSBGaXJlYmFzZToiLCBlKTsNCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBpc0N1cnJlbnRVc2VyQWRtaW4oKSB7DQogICAgY29uc3QgdXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsNCiAgICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZTsNCiAgICBpZiAoYWxsb3dlZEFkbWluRW1haWxzLnNpemUgPT09IDApIHsNCiAgICAgIGNvbnNvbGUud2FybigNCiAgICAgICAgIk5lc3N1bmEgYWxsb3dsaXN0IGFkbWluIGNvbmZpZ3VyYXRhOiBjb25zZW50byBsJ2FjY2Vzc28gYSBxdWFsc2lhc2kgdXRlbnRlIGF1dGVudGljYXRvIg0KICAgICAgKTsNCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCiAgICByZXR1cm4gYWxsb3dlZEFkbWluRW1haWxzLmhhcyhTdHJpbmcodXNlci5lbWFpbCB8fCAiIikudG9Mb3dlckNhc2UoKSk7DQogIH0NCg0KICBmdW5jdGlvbiBpc0FkbWluU2Vzc2lvblZhbGlkKCkgew0KICAgIHJldHVybiAhIWZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlciAmJiBpc0N1cnJlbnRVc2VyQWRtaW4oKTsNCiAgfQ0KDQogIGFzeW5jIGZ1bmN0aW9uIGNsZWFyQWRtaW5TZXNzaW9uKCkgew0KICAgIHRyeSB7DQogICAgICBhd2FpdCBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpOw0KICAgIH0gY2F0Y2gge30NCiAgfQ0KDQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAvLyBHRVNUSU9ORSBVSSBMT0dJTi9BRE1JTg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgZnVuY3Rpb24gc2hvd0FkbWluSW50ZXJmYWNlKCkgew0KICAgIGNvbnN0IGxvZ2luTW9kYWwgPSBxcygibG9naW5Nb2RhbCIpOw0KICAgIGNvbnN0IGFkbWluQ29udGFpbmVyID0gcXMoImFkbWluQ29udGFpbmVyIik7DQogICAgaWYgKGxvZ2luTW9kYWwpIGxvZ2luTW9kYWwuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7DQogICAgaWYgKGFkbWluQ29udGFpbmVyKSBhZG1pbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICBsb2FkU2V0dGluZ3MoKTsNCiAgICBpbml0RG9vckNvbnRyb2xzKCk7DQogIH0NCg0KICBmdW5jdGlvbiBzaG93TG9naW5Nb2RhbCgpIHsNCiAgICBjb25zdCBsb2dpbk1vZGFsID0gcXMoImxvZ2luTW9kYWwiKTsNCiAgICBjb25zdCBhZG1pbkNvbnRhaW5lciA9IHFzKCJhZG1pbkNvbnRhaW5lciIpOw0KICAgIGlmIChsb2dpbk1vZGFsKSBsb2dpbk1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOw0KICAgIGlmIChhZG1pbkNvbnRhaW5lcikgYWRtaW5Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgfQ0KDQogIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUxvZ2luKCkgew0KICAgIGNvbnN0IGVtYWlsRWwgPSBxcygiYWRtaW5FbWFpbCIpOw0KICAgIGNvbnN0IHB3RWwgPSBxcygiYWRtaW5QYXNzd29yZCIpOw0KICAgIGNvbnN0IGVtYWlsID0gKGVtYWlsRWw/LnZhbHVlIHx8ICIiKS50cmltKCk7DQogICAgY29uc3QgcGFzc3dvcmQgPSAocHdFbD8udmFsdWUgfHwgIiIpLnRyaW0oKTsNCiAgICBjb25zdCBsb2dpbkVycm9yID0gcXMoImxvZ2luRXJyb3IiKTsNCiAgICBjb25zdCBsb2dpbk1vZGFsID0gcXMoImxvZ2luTW9kYWwiKTsNCg0KICAgIGlmIChsb2dpbkVycm9yKSBsb2dpbkVycm9yLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHsNCiAgICAgIGlmIChsb2dpbkVycm9yKSB7DQogICAgICAgIGxvZ2luRXJyb3IudGV4dENvbnRlbnQgPSAiSW5zZXJpc2NpIGVtYWlsIGUgcGFzc3dvcmQiOw0KICAgICAgICBsb2dpbkVycm9yLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgfQ0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICB0cnkgew0KICAgICAgYXdhaXQgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7DQogICAgICAvLyBvbkF1dGhTdGF0ZUNoYW5nZWQgZ2VzdGlyYSBsJ1VJDQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgY29uc29sZS5lcnJvcigiRmlyZWJhc2UgYXV0aCBlcnJvcjoiLCBlPy5jb2RlLCBlPy5tZXNzYWdlKTsNCiAgICAgIGNvbnN0IG1hcCA9IHsNCiAgICAgICAgImF1dGgvaW52YWxpZC1lbWFpbCI6ICJFbWFpbCBub24gdmFsaWRhIiwNCiAgICAgICAgImF1dGgvdXNlci1kaXNhYmxlZCI6ICJVdGVudGUgZGlzYWJpbGl0YXRvIiwNCiAgICAgICAgImF1dGgvdXNlci1ub3QtZm91bmQiOiAiRW1haWwgbm9uIHJlZ2lzdHJhdGEiLA0KICAgICAgICAiYXV0aC93cm9uZy1wYXNzd29yZCI6ICJQYXNzd29yZCBlcnJhdGEiLA0KICAgICAgICAiYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQiOg0KICAgICAgICAgICJNZXRvZG8gRW1haWwvUGFzc3dvcmQgbm9uIGFiaWxpdGF0byBuZWxsZSBpbXBvc3RhemlvbmkgRmlyZWJhc2UiLA0KICAgICAgICAiYXV0aC9pbnZhbGlkLWFwaS1rZXkiOiAiQVBJIGtleSBub24gdmFsaWRhIG8gcHJvZ2V0dG8gZXJyYXRvIiwNCiAgICAgICAgImF1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCI6DQogICAgICAgICAgIkVycm9yZSBkaSByZXRlOiBjb250cm9sbGEgbGEgY29ubmVzc2lvbmUiLA0KICAgICAgICAiYXV0aC90b28tbWFueS1yZXF1ZXN0cyI6ICJUcm9wcGkgdGVudGF0aXZpOiByaXByb3ZhIHBpdSB0YXJkaSIsDQogICAgICAgICJhdXRoL2ludGVybmFsLWVycm9yIjogIkVycm9yZSBpbnRlcm5vOiByaXByb3ZhIiwNCiAgICAgIH07DQogICAgICBjb25zdCBmcmllbmRseSA9IG1hcFtlPy5jb2RlXSB8fCBlPy5tZXNzYWdlIHx8ICJFcnJvcmUgc2Nvbm9zY2l1dG8iOw0KICAgICAgaWYgKGxvZ2luRXJyb3IpIHsNCiAgICAgICAgbG9naW5FcnJvci50ZXh0Q29udGVudCA9IGZyaWVuZGx5Ow0KICAgICAgICBsb2dpbkVycm9yLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgfQ0KICAgICAgaWYgKGxvZ2luTW9kYWwpIHsNCiAgICAgICAgbG9naW5Nb2RhbC5jbGFzc0xpc3QuYWRkKCJzaGFrZSIpOw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGxvZ2luTW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgic2hha2UiKSwgNTAwKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgLy8gSU1QT1NUQVpJT05JIChGaXJlYmFzZSArIExvY2FsU3RvcmFnZSkNCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogIGFzeW5jIGZ1bmN0aW9uIHNhdmVTZXR0aW5nVG9GaXJlYmFzZShrZXksIHZhbHVlKSB7DQogICAgdHJ5IHsNCiAgICAgIGF3YWl0IGRhdGFiYXNlLnJlZigic2V0dGluZ3MvIiArIGtleSkuc2V0KHZhbHVlKTsNCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICBjb25zb2xlLmVycm9yKGBFcnJvcmUgbmVsIHNhbHZhdGFnZ2lvIGRpICR7a2V5fSBzdSBGaXJlYmFzZTpgLCBlcnJvcik7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICB9DQoNCiAgYXN5bmMgZnVuY3Rpb24gbG9hZFNldHRpbmdzRnJvbUZpcmViYXNlKCkgew0KICAgIHRyeSB7DQogICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRhdGFiYXNlLnJlZigic2V0dGluZ3MiKS5vbmNlKCJ2YWx1ZSIpOw0KICAgICAgcmV0dXJuIHNuYXBzaG90LmV4aXN0cygpID8gc25hcHNob3QudmFsKCkgOiBudWxsOw0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICBjb25zb2xlLmVycm9yKCJFcnJvcmUgbmVsIGNhcmljYW1lbnRvIGltcG9zdGF6aW9uaSBkYSBGaXJlYmFzZToiLCBlcnJvcik7DQogICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQogIH0NCg0KICBhc3luYyBmdW5jdGlvbiBsb2FkU2V0dGluZ3MoKSB7DQogICAgY29uc3QgZmlyZWJhc2VTZXR0aW5ncyA9IGF3YWl0IGxvYWRTZXR0aW5nc0Zyb21GaXJlYmFzZSgpOw0KDQogICAgLy8gT3ZlcnJpZGUgc2VncmV0aSBzZSBwcmVzZW50aQ0KICAgIGlmIChmaXJlYmFzZVNldHRpbmdzKSB7DQogICAgICBpZiAodHlwZW9mIGZpcmViYXNlU2V0dGluZ3MuYWRtaW5fc2VjcmV0ID09PSAic3RyaW5nIikgew0KICAgICAgICBBRE1JTl9TRUNSRVQgPSBmaXJlYmFzZVNldHRpbmdzLmFkbWluX3NlY3JldDsNCiAgICAgIH0NCiAgICAgIGlmICh0eXBlb2YgZmlyZWJhc2VTZXR0aW5ncy5hZG1pbl9wYXNzd29yZCA9PT0gInN0cmluZyIpIHsNCiAgICAgICAgQURNSU5fUEFTU1dPUkQgPSBmaXJlYmFzZVNldHRpbmdzLmFkbWluX3Bhc3N3b3JkOw0KICAgICAgfQ0KICAgICAgYXBwbHlTZXR0aW5nc0Zyb21GaXJlYmFzZShmaXJlYmFzZVNldHRpbmdzKTsNCiAgICB9IGVsc2Ugew0KICAgICAgYXBwbHlTZXR0aW5nc0Zyb21Mb2NhbFN0b3JhZ2UoKTsNCiAgICB9DQoNCiAgICBsb2FkQ2hlY2tpblRpbWVTZXR0aW5ncygpOw0KICAgIGxvYWRFeHRyYURvb3JzVmlzaWJpbGl0eSgpOw0KICAgIHVwZGF0ZUFjdGl2ZUxpbmtzTGlzdCgpOw0KICAgIHVwZGF0ZUxpbmtTdGF0aXN0aWNzKCk7DQogIH0NCg0KICBmdW5jdGlvbiBhcHBseVNldHRpbmdzRnJvbUZpcmViYXNlKHNldHRpbmdzKSB7DQogICAgY29uc3Qgc2VjcmV0Q29kZSA9IHNldHRpbmdzLnNlY3JldF9jb2RlIHx8ICIyMjQ1IjsNCiAgICBjb25zdCBtYXhDbGlja3MgPSBzZXR0aW5ncy5tYXhfY2xpY2tzIHx8ICIzIjsNCiAgICBjb25zdCB0aW1lTGltaXQgPSBzZXR0aW5ncy50aW1lX2xpbWl0X21pbnV0ZXMgfHwgIjUwMDAwIjsNCg0KICAgIGNvbnN0IGN1cnJlbnRDb2RlID0gcXMoImN1cnJlbnRDb2RlIik7DQogICAgY29uc3QgY3VycmVudE1heENsaWNrcyA9IHFzKCJjdXJyZW50TWF4Q2xpY2tzIik7DQogICAgY29uc3QgY3VycmVudFRpbWVMaW1pdCA9IHFzKCJjdXJyZW50VGltZUxpbWl0Iik7DQogICAgY29uc3QgbmV3TWF4Q2xpY2tzID0gcXMoIm5ld01heENsaWNrcyIpOw0KICAgIGNvbnN0IG5ld1RpbWVMaW1pdCA9IHFzKCJuZXdUaW1lTGltaXQiKTsNCg0KICAgIGlmIChjdXJyZW50Q29kZSkgY3VycmVudENvZGUudmFsdWUgPSBzZWNyZXRDb2RlOw0KICAgIGlmIChjdXJyZW50TWF4Q2xpY2tzKSBjdXJyZW50TWF4Q2xpY2tzLnZhbHVlID0gbWF4Q2xpY2tzOw0KICAgIGlmIChjdXJyZW50VGltZUxpbWl0KSBjdXJyZW50VGltZUxpbWl0LnZhbHVlID0gdGltZUxpbWl0Ow0KICAgIGlmIChuZXdNYXhDbGlja3MpIG5ld01heENsaWNrcy52YWx1ZSA9IG1heENsaWNrczsNCiAgICBpZiAobmV3VGltZUxpbWl0KSBuZXdUaW1lTGltaXQudmFsdWUgPSB0aW1lTGltaXQ7DQoNCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2VjcmV0X2NvZGUiLCBzZWNyZXRDb2RlKTsNCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWF4X2NsaWNrcyIsIFN0cmluZyhtYXhDbGlja3MpKTsNCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidGltZV9saW1pdF9taW51dGVzIiwgU3RyaW5nKHRpbWVMaW1pdCkpOw0KICB9DQoNCiAgZnVuY3Rpb24gYXBwbHlTZXR0aW5nc0Zyb21Mb2NhbFN0b3JhZ2UoKSB7DQogICAgY29uc3Qgc2VjcmV0Q29kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzZWNyZXRfY29kZSIpIHx8ICIyMjQ1IjsNCiAgICBjb25zdCBtYXhDbGlja3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibWF4X2NsaWNrcyIpIHx8ICIzIjsNCiAgICBjb25zdCB0aW1lTGltaXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidGltZV9saW1pdF9taW51dGVzIikgfHwgIjUwMDAwIjsNCg0KICAgIGNvbnN0IGN1cnJlbnRDb2RlID0gcXMoImN1cnJlbnRDb2RlIik7DQogICAgY29uc3QgY3VycmVudE1heENsaWNrcyA9IHFzKCJjdXJyZW50TWF4Q2xpY2tzIik7DQogICAgY29uc3QgY3VycmVudFRpbWVMaW1pdCA9IHFzKCJjdXJyZW50VGltZUxpbWl0Iik7DQogICAgY29uc3QgbmV3TWF4Q2xpY2tzID0gcXMoIm5ld01heENsaWNrcyIpOw0KICAgIGNvbnN0IG5ld1RpbWVMaW1pdCA9IHFzKCJuZXdUaW1lTGltaXQiKTsNCg0KICAgIGlmIChjdXJyZW50Q29kZSkgY3VycmVudENvZGUudmFsdWUgPSBzZWNyZXRDb2RlOw0KICAgIGlmIChjdXJyZW50TWF4Q2xpY2tzKSBjdXJyZW50TWF4Q2xpY2tzLnZhbHVlID0gbWF4Q2xpY2tzOw0KICAgIGlmIChjdXJyZW50VGltZUxpbWl0KSBjdXJyZW50VGltZUxpbWl0LnZhbHVlID0gdGltZUxpbWl0Ow0KICAgIGlmIChuZXdNYXhDbGlja3MpIG5ld01heENsaWNrcy52YWx1ZSA9IG1heENsaWNrczsNCiAgICBpZiAobmV3VGltZUxpbWl0KSBuZXdUaW1lTGltaXQudmFsdWUgPSB0aW1lTGltaXQ7DQoNCiAgICBzYXZlU2V0dGluZ1RvRmlyZWJhc2UoInNlY3JldF9jb2RlIiwgc2VjcmV0Q29kZSk7DQogICAgc2F2ZVNldHRpbmdUb0ZpcmViYXNlKCJtYXhfY2xpY2tzIiwgbWF4Q2xpY2tzKTsNCiAgICBzYXZlU2V0dGluZ1RvRmlyZWJhc2UoInRpbWVfbGltaXRfbWludXRlcyIsIHRpbWVMaW1pdCk7DQogIH0NCg0KICBhc3luYyBmdW5jdGlvbiB1cGRhdGVTZWNyZXRDb2RlKCkgew0KICAgIGNvbnN0IG5ld0NvZGVFbCA9IHFzKCJuZXdDb2RlIik7DQogICAgY29uc3QgbmV3Q29kZSA9IChuZXdDb2RlRWw/LnZhbHVlIHx8ICIiKS50cmltKCk7DQogICAgaWYgKCFuZXdDb2RlKSByZXR1cm4gYWxlcnRPbmNlKCJJbnNlcmlzY2kgdW4gY29kaWNlIHZhbGlkbyIpOw0KDQogICAgY29uc3Qgb2sgPSBhd2FpdCBzYXZlU2V0dGluZ1RvRmlyZWJhc2UoInNlY3JldF9jb2RlIiwgbmV3Q29kZSk7DQogICAgaWYgKCFvaykgcmV0dXJuIGFsZXJ0T25jZSgiRXJyb3JlIG5lbCBzYWx2YXRhZ2dpbyBkZWwgbnVvdm8gY29kaWNlLiIpOw0KDQogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInNlY3JldF9jb2RlIiwgbmV3Q29kZSk7DQoNCiAgICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IHBhcnNlSW50KA0KICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImNvZGVfdmVyc2lvbiIpIHx8ICIxIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBjb25zdCBuZXdWZXJzaW9uID0gY3VycmVudFZlcnNpb24gKyAxOw0KICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJjb2RlX3ZlcnNpb24iLCBTdHJpbmcobmV3VmVyc2lvbikpOw0KICAgIGF3YWl0IHNhdmVTZXR0aW5nVG9GaXJlYmFzZSgiY29kZV92ZXJzaW9uIiwgbmV3VmVyc2lvbik7DQoNCiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7DQogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImxhc3RfY29kZV91cGRhdGUiLCB0aW1lc3RhbXApOw0KICAgIGF3YWl0IHNhdmVTZXR0aW5nVG9GaXJlYmFzZSgibGFzdF9jb2RlX3VwZGF0ZSIsIHRpbWVzdGFtcCk7DQoNCiAgICBjb25zdCBjdXJyZW50Q29kZSA9IHFzKCJjdXJyZW50Q29kZSIpOw0KICAgIGlmIChjdXJyZW50Q29kZSkgY3VycmVudENvZGUudmFsdWUgPSBuZXdDb2RlOw0KICAgIGlmIChuZXdDb2RlRWwpIG5ld0NvZGVFbC52YWx1ZSA9ICIiOw0KICAgIGFsZXJ0T25jZSgiQ29kaWNlIGFnZ2lvcm5hdG8hIEdsaSB1dGVudGkgZG92cmFubm8gdXNhcmUgaWwgbnVvdm8gY29kaWNlLiIpOw0KICB9DQoNCiAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3lzdGVtU2V0dGluZ3MoKSB7DQogICAgY29uc3QgbmV3TWF4Q2xpY2tzID0gKHFzKCJuZXdNYXhDbGlja3MiKT8udmFsdWUgfHwgIiIpLnRyaW0oKTsNCiAgICBjb25zdCBuZXdUaW1lTGltaXQgPSAocXMoIm5ld1RpbWVMaW1pdCIpPy52YWx1ZSB8fCAiIikudHJpbSgpOw0KDQogICAgY29uc3QgY2xpY2tzTnVtID0gcGFyc2VJbnQobmV3TWF4Q2xpY2tzLCAxMCk7DQogICAgY29uc3QgdGltZU51bSA9IHBhcnNlSW50KG5ld1RpbWVMaW1pdCwgMTApOw0KDQogICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoY2xpY2tzTnVtKSB8fCBjbGlja3NOdW0gPD0gMCkgew0KICAgICAgcmV0dXJuIGFsZXJ0T25jZSgiSW5zZXJpc2NpIHVuIG51bWVybyB2YWxpZG8gcGVyIGkgY2xpY2sgbWFzc2ltaSIpOw0KICAgIH0NCiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh0aW1lTnVtKSB8fCB0aW1lTnVtIDw9IDApIHsNCiAgICAgIHJldHVybiBhbGVydE9uY2UoIkluc2VyaXNjaSB1biBudW1lcm8gdmFsaWRvIHBlciBpbCB0aW1lIGxpbWl0Iik7DQogICAgfQ0KDQogICAgY29uc3Qgb2sxID0gYXdhaXQgc2F2ZVNldHRpbmdUb0ZpcmViYXNlKCJtYXhfY2xpY2tzIiwgY2xpY2tzTnVtKTsNCiAgICBjb25zdCBvazIgPSBhd2FpdCBzYXZlU2V0dGluZ1RvRmlyZWJhc2UoInRpbWVfbGltaXRfbWludXRlcyIsIHRpbWVOdW0pOw0KDQogICAgaWYgKG9rMSAmJiBvazIpIHsNCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJtYXhfY2xpY2tzIiwgU3RyaW5nKGNsaWNrc051bSkpOw0KICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRpbWVfbGltaXRfbWludXRlcyIsIFN0cmluZyh0aW1lTnVtKSk7DQogICAgICBjb25zdCBjdXJyZW50TWF4Q2xpY2tzID0gcXMoImN1cnJlbnRNYXhDbGlja3MiKTsNCiAgICAgIGNvbnN0IGN1cnJlbnRUaW1lTGltaXQgPSBxcygiY3VycmVudFRpbWVMaW1pdCIpOw0KICAgICAgaWYgKGN1cnJlbnRNYXhDbGlja3MpIGN1cnJlbnRNYXhDbGlja3MudmFsdWUgPSBTdHJpbmcoY2xpY2tzTnVtKTsNCiAgICAgIGlmIChjdXJyZW50VGltZUxpbWl0KSBjdXJyZW50VGltZUxpbWl0LnZhbHVlID0gU3RyaW5nKHRpbWVOdW0pOw0KICAgICAgYWxlcnRPbmNlKCJJbXBvc3RhemlvbmkgYWdnaW9ybmF0ZSEiKTsNCiAgICB9IGVsc2Ugew0KICAgICAgYWxlcnRPbmNlKCJFcnJvcmUgbmVsIHNhbHZhdGFnZ2lvIGltcG9zdGF6aW9uaS4iKTsNCiAgICB9DQogIH0NCg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgLy8gT1JBUklPIENIRUNLw6LigqzigJhJTg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgZnVuY3Rpb24gbG9hZENoZWNraW5UaW1lU2V0dGluZ3MoKSB7DQogICAgZGF0YWJhc2UucmVmKCJzZXR0aW5ncyIpLm9uKCJ2YWx1ZSIsIChzbmFwKSA9PiB7DQogICAgICBjb25zdCBzID0gc25hcC52YWwoKSB8fCB7fTsNCiAgICAgIGNvbnN0IHN0YXJ0ID0gcy5jaGVja2luX3N0YXJ0X3RpbWUgfHwgIjE0OjAwIjsNCiAgICAgIGNvbnN0IGVuZCA9IHMuY2hlY2tpbl9lbmRfdGltZSB8fCAiMjI6MDAiOw0KICAgICAgY29uc3QgZW5hYmxlZCA9IFN0cmluZyhzLmNoZWNraW5fdGltZV9lbmFibGVkKSAhPT0gImZhbHNlIjsNCg0KICAgICAgY29uc3Qgc3RhcnRFbCA9IHFzKCJjaGVja2luU3RhcnRUaW1lIik7DQogICAgICBjb25zdCBlbmRFbCA9IHFzKCJjaGVja2luRW5kVGltZSIpOw0KICAgICAgY29uc3QgY3VycmVudFJhbmdlRWwgPSBxcygiY3VycmVudENoZWNraW5UaW1lUmFuZ2UiKTsNCiAgICAgIGNvbnN0IHN0YXR1c0VsID0gcXMoImNoZWNraW5UaW1lU3RhdHVzIik7DQogICAgICBjb25zdCB0b2dnbGVCdG4gPSBxcygiYnRuVG9nZ2xlQ2hlY2tpblRpbWUiKTsNCg0KICAgICAgaWYgKHN0YXJ0RWwpIHN0YXJ0RWwudmFsdWUgPSBzdGFydDsNCiAgICAgIGlmIChlbmRFbCkgZW5kRWwudmFsdWUgPSBlbmQ7DQogICAgICBpZiAoY3VycmVudFJhbmdlRWwpIGN1cnJlbnRSYW5nZUVsLnZhbHVlID0gYCR7c3RhcnR9IC0gJHtlbmR9YDsNCg0KICAgICAgaWYgKHN0YXR1c0VsICYmIHRvZ2dsZUJ0bikgew0KICAgICAgICBpZiAoZW5hYmxlZCkgew0KICAgICAgICAgIHN0YXR1c0VsLmlubmVySFRNTCA9DQogICAgICAgICAgICAnPHNwYW4gY2xhc3M9InN0YXR1cy1pbmRpY2F0b3Igc3RhdHVzLW9uIj48L3NwYW4+IEF0dGl2byc7DQogICAgICAgICAgdG9nZ2xlQnRuLmNsYXNzTGlzdC5yZW1vdmUoImJ0bi1lcnJvciIpOw0KICAgICAgICAgIHRvZ2dsZUJ0bi5jbGFzc0xpc3QuYWRkKCJidG4tc3VjY2VzcyIpOw0KICAgICAgICAgIHRvZ2dsZUJ0bi5pbm5lckhUTUwgPQ0KICAgICAgICAgICAgJzxpIGNsYXNzPSJmYXMgZmEtdG9nZ2xlLW9uIj48L2k+IERpc2F0dGl2YSBDb250cm9sbG8gT3JhcmlvJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBzdGF0dXNFbC5pbm5lckhUTUwgPQ0KICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJzdGF0dXMtaW5kaWNhdG9yIHN0YXR1cy1vZmYiPjwvc3Bhbj4gRGlzYXR0aXZhdG8nOw0KICAgICAgICAgIHRvZ2dsZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCJidG4tc3VjY2VzcyIpOw0KICAgICAgICAgIHRvZ2dsZUJ0bi5jbGFzc0xpc3QuYWRkKCJidG4tZXJyb3IiKTsNCiAgICAgICAgICB0b2dnbGVCdG4uaW5uZXJIVE1MID0NCiAgICAgICAgICAgICc8aSBjbGFzcz0iZmFzIGZhLXRvZ2dsZS1vZmYiPjwvaT4gQXR0aXZhIENvbnRyb2xsbyBPcmFyaW8nOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBpc1ZhbGlkVGltZVJhbmdlKHN0YXJ0VGltZSwgZW5kVGltZSkgew0KICAgIGNvbnN0IFtzaCwgc21dID0gc3RhcnRUaW1lLnNwbGl0KCI6IikubWFwKE51bWJlcik7DQogICAgY29uc3QgW2VoLCBlbV0gPSBlbmRUaW1lLnNwbGl0KCI6IikubWFwKE51bWJlcik7DQogICAgcmV0dXJuIGVoICogNjAgKyBlbSA+IHNoICogNjAgKyBzbTsNCiAgfQ0KDQogIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNoZWNraW5UaW1lKCkgew0KICAgIGNvbnN0IHN0YXJ0ID0gcXMoImNoZWNraW5TdGFydFRpbWUiKT8udmFsdWU7DQogICAgY29uc3QgZW5kID0gcXMoImNoZWNraW5FbmRUaW1lIik/LnZhbHVlOw0KDQogICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7DQogICAgICBhbGVydE9uY2UoIkluc2VyaXNjaSBvcmFyaSB2YWxpZGkiKTsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYgKCFpc1ZhbGlkVGltZVJhbmdlKHN0YXJ0LCBlbmQpKSB7DQogICAgICBjb25zdCBlcnJFbCA9IHFzKCJ0aW1lUmFuZ2VFcnJvciIpOw0KICAgICAgaWYgKGVyckVsKSBlcnJFbC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgY29uc3QgZXJyRWwgPSBxcygidGltZVJhbmdlRXJyb3IiKTsNCiAgICBpZiAoZXJyRWwpIGVyckVsLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoNCiAgICBjb25zdCBzMSA9IGF3YWl0IHNhdmVTZXR0aW5nVG9GaXJlYmFzZSgiY2hlY2tpbl9zdGFydF90aW1lIiwgc3RhcnQpOw0KICAgIGNvbnN0IHMyID0gYXdhaXQgc2F2ZVNldHRpbmdUb0ZpcmViYXNlKCJjaGVja2luX2VuZF90aW1lIiwgZW5kKTsNCiAgICBpZiAoczEgJiYgczIpIHsNCiAgICAgIGFsZXJ0T25jZSgiT3JhcmlvIGRpIGNoZWNrLWluIGFnZ2lvcm5hdG8gY29uIHN1Y2Nlc3NvISIpOw0KICAgIH0gZWxzZSB7DQogICAgICBhbGVydE9uY2UoIkVycm9yZSBuZWwgc2FsdmF0YWdnaW8gZGVsbCdvcmFyaW8gZGkgY2hlY2staW4uIFJpcHJvdmFyZS4iKTsNCiAgICB9DQogIH0NCg0KICBhc3luYyBmdW5jdGlvbiB0b2dnbGVDaGVja2luVGltZSgpIHsNCiAgICBjb25zdCBzbmFwID0gYXdhaXQgZGF0YWJhc2UNCiAgICAgIC5yZWYoInNldHRpbmdzL2NoZWNraW5fdGltZV9lbmFibGVkIikNCiAgICAgIC5vbmNlKCJ2YWx1ZSIpOw0KICAgIGNvbnN0IGN1cnJlbnQgPSBTdHJpbmcoc25hcC52YWwoKSkgIT09ICJmYWxzZSI7DQogICAgY29uc3QgbmV3U3RhdHVzID0gIWN1cnJlbnQ7DQoNCiAgICBjb25zdCBvayA9IGF3YWl0IHNhdmVTZXR0aW5nVG9GaXJlYmFzZSgNCiAgICAgICJjaGVja2luX3RpbWVfZW5hYmxlZCIsDQogICAgICBTdHJpbmcobmV3U3RhdHVzKQ0KICAgICk7DQogICAgaWYgKG9rKSB7DQogICAgICBhbGVydE9uY2UoDQogICAgICAgIGBDb250cm9sbG8gb3JhcmlvICR7DQogICAgICAgICAgbmV3U3RhdHVzID8gImF0dGl2YXRvIiA6ICJkaXNhdHRpdmF0byINCiAgICAgICAgfSBjb24gc3VjY2Vzc28hYA0KICAgICAgKTsNCiAgICB9IGVsc2Ugew0KICAgICAgYWxlcnRPbmNlKCJFcnJvcmUgbmVsIHNhbHZhdGFnZ2lvIGRlbGxlIGltcG9zdGF6aW9uaS4gUmlwcm92YXJlLiIpOw0KICAgIH0NCiAgfQ0KDQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAvLyBQT1JURSBFWFRSQSAodmlzaWJpbGl0w4PCoCkNCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogIGZ1bmN0aW9uIGxvYWRFeHRyYURvb3JzVmlzaWJpbGl0eSgpIHsNCiAgICB0cnkgew0KICAgICAgY29uc3QgZGV2aWNlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImRldmljZXMiKSB8fCAiW10iKTsNCiAgICAgIGlmIChkZXZpY2VzLmxlbmd0aCA+PSA0KSB7DQogICAgICAgIGNvbnN0IGQyID0gcXMoImV4dHJhRG9vcjFWaXNpYmxlIik7DQogICAgICAgIGNvbnN0IGQzID0gcXMoImV4dHJhRG9vcjJWaXNpYmxlIik7DQogICAgICAgIGlmIChkMikgZDIuY2hlY2tlZCA9ICEhZGV2aWNlc1syXS52aXNpYmxlOw0KICAgICAgICBpZiAoZDMpIGQzLmNoZWNrZWQgPSAhIWRldmljZXNbM10udmlzaWJsZTsNCiAgICAgIH0NCiAgICB9IGNhdGNoIChlKSB7DQogICAgICBjb25zb2xlLmVycm9yKCJFcnJvcmUgbmVsIGNhcmljYW1lbnRvIGRlbGxlIHBvcnRlIGV4dHJhOiIsIGUpOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHVwZGF0ZUV4dHJhRG9vcnNWaXNpYmlsaXR5U2V0dGluZ3MoKSB7DQogICAgdHJ5IHsNCiAgICAgIGxldCBkZXZpY2VzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiZGV2aWNlcyIpIHx8ICJbXSIpOw0KICAgICAgY29uc3QgdjIgPSAhIXFzKCJleHRyYURvb3IxVmlzaWJsZSIpPy5jaGVja2VkOw0KICAgICAgY29uc3QgdjMgPSAhIXFzKCJleHRyYURvb3IyVmlzaWJsZSIpPy5jaGVja2VkOw0KDQogICAgICBpZiAoZGV2aWNlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgZGV2aWNlcyA9IFsNCiAgICAgICAgICB7IGJ1dHRvbl9pZDogIk1haW5Eb29yIiwgdmlzaWJsZTogdHJ1ZSB9LA0KICAgICAgICAgIHsgYnV0dG9uX2lkOiAiQXB0RG9vciIsIHZpc2libGU6IHRydWUgfSwNCiAgICAgICAgICB7IGJ1dHRvbl9pZDogIkV4dHJhRG9vcjEiLCB2aXNpYmxlOiB2MiB9LA0KICAgICAgICAgIHsgYnV0dG9uX2lkOiAiRXh0cmFEb29yMiIsIHZpc2libGU6IHYzIH0sDQogICAgICAgIF07DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoZGV2aWNlcy5sZW5ndGggPiAyKSBkZXZpY2VzWzJdLnZpc2libGUgPSB2MjsNCiAgICAgICAgaWYgKGRldmljZXMubGVuZ3RoID4gMykgZGV2aWNlc1szXS52aXNpYmxlID0gdjM7DQogICAgICB9DQoNCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJkZXZpY2VzIiwgSlNPTi5zdHJpbmdpZnkoZGV2aWNlcykpOw0KICAgICAgdXBkYXRlRXh0cmFEb29yc1Zpc2liaWxpdHkoKTsNCiAgICAgIGFsZXJ0T25jZSgiVmlzaWJpbGl0w4PCoCBwb3J0ZSBleHRyYSBhZ2dpb3JuYXRhISIpOw0KICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yZSBuZWwgc2FsdmF0YWdnaW8gZGVsbGUgcG9ydGUgZXh0cmE6IiwgZSk7DQogICAgICBhbGVydE9uY2UoIlNpIMODwqggdmVyaWZpY2F0byB1biBlcnJvcmUgZHVyYW50ZSBpbCBzYWx2YXRhZ2dpby4iKTsNCiAgICB9DQogIH0NCg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgLy8gTElOSyBTSUNVUkkgKEZpcmViYXNlICsgTFMpICsgSEFTSCBUT0tFTg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVJZCgpIHsNCiAgICByZXR1cm4gImxpbmtfIiArIERhdGUubm93KCkgKyAiXyIgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCAxMSk7DQogIH0NCg0KICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVNlY3VyZUxpbmsoKSB7DQogICAgY29uc3QgZXhwaXJhdGlvbkhvdXJzID0gcGFyc2VJbnQocXMoImxpbmtFeHBpcmF0aW9uIik/LnZhbHVlIHx8ICIwIiwgMTApOw0KICAgIGNvbnN0IG1heFVzYWdlID0gcGFyc2VJbnQocXMoImxpbmtVc2FnZSIpPy52YWx1ZSB8fCAiMCIsIDEwKTsNCiAgICBjb25zdCBjdXN0b21Db2RlID0gKHFzKCJsaW5rQ3VzdG9tQ29kZSIpPy52YWx1ZSB8fCAiIikudHJpbSgpOw0KDQogICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoZXhwaXJhdGlvbkhvdXJzKSB8fCBleHBpcmF0aW9uSG91cnMgPD0gMCkgew0KICAgICAgcmV0dXJuIGFsZXJ0T25jZSgiT3JlIGRpIHNjYWRlbnphIG5vbiB2YWxpZGUiKTsNCiAgICB9DQogICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobWF4VXNhZ2UpIHx8IG1heFVzYWdlIDw9IDApIHsNCiAgICAgIHJldHVybiBhbGVydE9uY2UoIk51bWVybyB1dGlsaXp6aSBub24gdmFsaWRvIik7DQogICAgfQ0KDQogICAgY29uc3QgbGlua0lkID0gZ2VuZXJhdGVVbmlxdWVJZCgpOw0KICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lID0gRGF0ZS5ub3coKSArIGV4cGlyYXRpb25Ib3VycyAqIDYwICogNjAgKiAxMDAwOw0KICAgIGNvbnN0IGJhc2VVcmwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOw0KICAgIGNvbnN0IGluZGV4VXJsID0gYmFzZVVybC5yZXBsYWNlKCJhZG1pbi5odG1sIiwgImluZGV4Lmh0bWwiKTsNCiAgICBjb25zdCBzZWN1cmVMaW5rID0gYCR7aW5kZXhVcmx9P3Rva2VuPSR7bGlua0lkfWA7DQogICAgY29uc3Qgb3V0ID0gcXMoImdlbmVyYXRlZFNlY3VyZUxpbmsiKTsNCiAgICBpZiAob3V0KSBvdXQudmFsdWUgPSBzZWN1cmVMaW5rOw0KDQogICAgLy8gaGFzaCBkZWwgdG9rZW4gcGVyIGludGVncml0w4PCoCBsYXRvIGNsaWVudCAobm90YTogc2VncmV0byBsYXRvIGNsaWVudCBub24gw4PCqCByZWFsbWVudGUgc2ljdXJvKQ0KICAgIGNvbnN0IHRva2VuSGFzaCA9IGF3YWl0IHNoYTI1NihsaW5rSWQgKyBBRE1JTl9TRUNSRVQpOw0KDQogICAgc2F2ZVNlY3VyZUxpbmsoDQogICAgICBsaW5rSWQsDQogICAgICBleHBpcmF0aW9uVGltZSwNCiAgICAgIG1heFVzYWdlLA0KICAgICAgZXhwaXJhdGlvbkhvdXJzLA0KICAgICAgY3VzdG9tQ29kZSwNCiAgICAgIHRva2VuSGFzaA0KICAgICk7DQogIH0NCg0KICBmdW5jdGlvbiBzYXZlU2VjdXJlTGluaygNCiAgICBsaW5rSWQsDQogICAgZXhwaXJhdGlvblRpbWUsDQogICAgbWF4VXNhZ2UsDQogICAgZXhwaXJhdGlvbkhvdXJzLA0KICAgIGN1c3RvbUNvZGUgPSBudWxsLA0KICAgIHRva2VuSGFzaCA9IG51bGwNCiAgKSB7DQogICAgY29uc3QgbGlua0RhdGEgPSB7DQogICAgICBpZDogbGlua0lkLA0KICAgICAgY3JlYXRlZDogRGF0ZS5ub3coKSwNCiAgICAgIGV4cGlyYXRpb246IGV4cGlyYXRpb25UaW1lLA0KICAgICAgbWF4VXNhZ2U6IE51bWJlcihtYXhVc2FnZSksDQogICAgICB1c2VkQ291bnQ6IDAsDQogICAgICBleHBpcmF0aW9uSG91cnM6IE51bWJlcihleHBpcmF0aW9uSG91cnMpLA0KICAgICAgc3RhdHVzOiAiYWN0aXZlIiwNCiAgICAgIGN1c3RvbUNvZGU6IGN1c3RvbUNvZGUgfHwgbnVsbCwNCiAgICAgIGhhc2g6IHRva2VuSGFzaCB8fCBudWxsLA0KICAgIH07DQoNCiAgICBkYXRhYmFzZQ0KICAgICAgLnJlZigic2VjdXJlX2xpbmtzLyIgKyBsaW5rSWQpDQogICAgICAuc2V0KGxpbmtEYXRhKQ0KICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICB1cGRhdGVBY3RpdmVMaW5rc0xpc3QoKTsNCiAgICAgICAgdXBkYXRlTGlua1N0YXRpc3RpY3MoKTsNCiAgICAgICAgY29uc3QgY2MgPSBxcygibGlua0N1c3RvbUNvZGUiKTsNCiAgICAgICAgaWYgKGNjKSBjYy52YWx1ZSA9ICIiOw0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3JlIHNhbHZhdGFnZ2lvIGxpbmsgc3UgRmlyZWJhc2U6IiwgZXJyb3IpOw0KICAgICAgICBjb25zdCBzZWN1cmVMaW5rcyA9IEpTT04ucGFyc2UoDQogICAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlY3VyZV9saW5rcyIpIHx8ICJ7fSINCiAgICAgICAgKTsNCiAgICAgICAgc2VjdXJlTGlua3NbbGlua0lkXSA9IGxpbmtEYXRhOw0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2VjdXJlX2xpbmtzIiwgSlNPTi5zdHJpbmdpZnkoc2VjdXJlTGlua3MpKTsNCiAgICAgICAgdXBkYXRlQWN0aXZlTGlua3NMaXN0KCk7DQogICAgICAgIHVwZGF0ZUxpbmtTdGF0aXN0aWNzKCk7DQogICAgICB9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNvcHlHZW5lcmF0ZWRMaW5rKCkgew0KICAgIGNvbnN0IGlucHV0ID0gcXMoImdlbmVyYXRlZFNlY3VyZUxpbmsiKTsNCiAgICBpZiAoIWlucHV0IHx8ICFpbnB1dC52YWx1ZSkgcmV0dXJuIGFsZXJ0T25jZSgiR2VuZXJhIHByaW1hIHVuIGxpbmsiKTsNCiAgICBpbnB1dC5zZWxlY3QoKTsNCiAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgiY29weSIpOw0KDQogICAgY29uc3QgYnRuID0gcXMoImJ0bkNvcHlTZWN1cmVMaW5rIik7DQogICAgaWYgKCFidG4pIHJldHVybjsNCiAgICBjb25zdCBvcmlnaW5hbCA9IGJ0bi5pbm5lckhUTUw7DQogICAgYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLWNoZWNrIj48L2k+IENvcGlhdG8hJzsNCiAgICBidG4uc3R5bGUuYmFja2dyb3VuZCA9ICJ2YXIoLS1zdWNjZXNzKSI7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICBidG4uaW5uZXJIVE1MID0gb3JpZ2luYWw7DQogICAgICBidG4uc3R5bGUuYmFja2dyb3VuZCA9ICIiOw0KICAgIH0sIDIwMDApOw0KICB9DQoNCiAgZnVuY3Rpb24gdXBkYXRlQWN0aXZlTGlua3NMaXN0KCkgew0KICAgIGNvbnN0IGNvbnRhaW5lciA9IHFzKCJhY3RpdmVMaW5rc0xpc3QiKTsNCiAgICBpZiAoY29udGFpbmVyKSB7DQogICAgICBjb250YWluZXIuaW5uZXJIVE1MID0NCiAgICAgICAgJzxwIHN0eWxlPSJjb2xvcjojNjY2O3RleHQtYWxpZ246Y2VudGVyOyI+Q2FyaWNhbWVudG8uLi48L3A+JzsNCiAgICB9DQoNCiAgICBkYXRhYmFzZQ0KICAgICAgLnJlZigic2VjdXJlX2xpbmtzIikNCiAgICAgIC5vcmRlckJ5Q2hpbGQoImNyZWF0ZWQiKQ0KICAgICAgLm9uY2UoInZhbHVlIikNCiAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4gew0KICAgICAgICBjb25zdCBhY3RpdmUgPSBbXTsNCiAgICAgICAgc25hcHNob3QuZm9yRWFjaCgoY2hpbGQpID0+IHsNCiAgICAgICAgICBjb25zdCBsaW5rID0gY2hpbGQudmFsKCk7DQogICAgICAgICAgaWYgKGxpbmsuc3RhdHVzID09PSAiYWN0aXZlIiAmJiBsaW5rLmV4cGlyYXRpb24gPiBEYXRlLm5vdygpKQ0KICAgICAgICAgICAgYWN0aXZlLnB1c2gobGluayk7DQogICAgICAgIH0pOw0KICAgICAgICByZW5kZXJBY3RpdmVMaW5rcyhjb250YWluZXIsIGFjdGl2ZSk7DQogICAgICB9KQ0KICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvcmUgbmVsIHJlY3VwZXJvIGRlaSBsaW5rOiIsIGVycm9yKTsNCiAgICAgICAgY29uc3Qgc2VjdXJlTGlua3MgPSBKU09OLnBhcnNlKA0KICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzZWN1cmVfbGlua3MiKSB8fCAie30iDQogICAgICAgICk7DQogICAgICAgIGNvbnN0IGFjdGl2ZSA9IE9iamVjdC52YWx1ZXMoc2VjdXJlTGlua3MpLmZpbHRlcigNCiAgICAgICAgICAobCkgPT4gbC5zdGF0dXMgPT09ICJhY3RpdmUiICYmIGwuZXhwaXJhdGlvbiA+IERhdGUubm93KCkNCiAgICAgICAgKTsNCiAgICAgICAgcmVuZGVyQWN0aXZlTGlua3MoY29udGFpbmVyLCBhY3RpdmUpOw0KICAgICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiByZW5kZXJBY3RpdmVMaW5rcyhjb250YWluZXIsIGFjdGl2ZUxpbmtzKSB7DQogICAgaWYgKCFjb250YWluZXIpIHJldHVybjsNCiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYWN0aXZlTGlua3MpIHx8IGFjdGl2ZUxpbmtzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9DQogICAgICAgICc8cCBzdHlsZT0iY29sb3I6IzY2Njt0ZXh0LWFsaWduOmNlbnRlcjsiPk5lc3N1biBsaW5rIGF0dGl2bzwvcD4nOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gIiI7DQogICAgYWN0aXZlTGlua3MNCiAgICAgIC5zbGljZSgpDQogICAgICAuc29ydCgoYSwgYikgPT4gYi5jcmVhdGVkIC0gYS5jcmVhdGVkKQ0KICAgICAgLmZvckVhY2goKGwpID0+IGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVMaW5rRWxlbWVudChsKSkpOw0KICB9DQoNCiAgZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQobGluaykgew0KICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgZWwuc3R5bGUuY3NzVGV4dCA9IGANCiAgICAgIHBhZGRpbmc6IDEwcHg7IG1hcmdpbjogOHB4IDA7IGJhY2tncm91bmQ6ICNmOGY5ZmE7DQogICAgICBib3JkZXItcmFkaXVzOiA2cHg7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tc3VjY2Vzcyk7DQogICAgYDsNCg0KICAgIGNvbnN0IGV4cGlyZXNJbkggPSBNYXRoLm1heCgNCiAgICAgIDAsDQogICAgICBNYXRoLmZsb29yKChsaW5rLmV4cGlyYXRpb24gLSBEYXRlLm5vdygpKSAvICgxMDAwICogNjAgKiA2MCkpDQogICAgKTsNCiAgICBjb25zdCB1c2FnZVRleHQgPSBgJHtsaW5rLnVzZWRDb3VudH0vJHtsaW5rLm1heFVzYWdlfSB1dGlsaXp6aWA7DQogICAgY29uc3QgbGlua1VybCA9DQogICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsNCiAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKCJhZG1pbi5odG1sIiwgImluZGV4Lmh0bWwiKSArDQogICAgICBgP3Rva2VuPSR7bGluay5pZH1gOw0KDQogICAgbGV0IGh0bWwgPSBgDQogICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTFweDtjb2xvcjojNjY2Ij5DcmVhdG86ICR7Zm10RGF0ZVRpbWUoDQogICAgICAgIGxpbmsuY3JlYXRlZA0KICAgICAgKX08L2Rpdj4NCiAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7bWFyZ2luOjNweCAwO2NvbG9yOnZhcigtLWRhcmspIj5TY2FkZSBpbjogJHtleHBpcmVzSW5IfWggw6LigqzCoiAke3VzYWdlVGV4dH08L2Rpdj4NCiAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMnB4O292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO21hcmdpbi1ib3R0b206NXB4OyI+DQogICAgICAgIDxhIGhyZWY9IiR7bGlua1VybH0iIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6dmFyKC0tcHJpbWFyeSkiPiR7DQogICAgICBsaW5rLmlkDQogICAgfTwvYT4NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDo1cHg7Ij4NCiAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjb3B5U2VjdXJlTGluaygnJHsNCiAgICAgICAgICBsaW5rLmlkDQogICAgICAgIH0nKSIgc3R5bGU9ImJhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtwYWRkaW5nOjRweCA4cHg7Ym9yZGVyLXJhZGl1czo0cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjExcHgiPg0KICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtY29weSI+PC9pPiBDb3BpYQ0KICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJyZXZva2VTZWN1cmVMaW5rKCckew0KICAgICAgICAgIGxpbmsuaWQNCiAgICAgICAgfScpIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS1lcnJvcik7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtwYWRkaW5nOjRweCA4cHg7Ym9yZGVyLXJhZGl1czo0cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjExcHgiPg0KICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtYmFuIj48L2k+IFJldm9jYQ0KICAgICAgICA8L2J1dHRvbj4NCiAgICAgIDwvZGl2Pg0KICAgIGA7DQoNCiAgICBpZiAobGluay5jdXN0b21Db2RlKSB7DQogICAgICBodG1sICs9IGA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS1wcmltYXJ5KTttYXJnaW4tdG9wOjVweCI+DQogICAgICAgIDxpIGNsYXNzPSJmYXMgZmEta2V5Ij48L2k+IENvZGljZSBkZWRpY2F0bzogJHtsaW5rLmN1c3RvbUNvZGV9DQogICAgICA8L2Rpdj5gOw0KICAgIH0NCiAgICBpZiAobGluay5oYXNoKSB7DQogICAgICBodG1sICs9IGA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTBweDtjb2xvcjojODg4O21hcmdpbi10b3A6NHB4Ij4NCiAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1maW5nZXJwcmludCI+PC9pPiBIYXNoOiAke1N0cmluZyhsaW5rLmhhc2gpLnNsaWNlKA0KICAgICAgICAgIDAsDQogICAgICAgICAgMTYNCiAgICAgICAgKX3DouKCrMKmDQogICAgICA8L2Rpdj5gOw0KICAgIH0NCg0KICAgIGVsLmlubmVySFRNTCA9IGh0bWw7DQogICAgcmV0dXJuIGVsOw0KICB9DQoNCiAgZnVuY3Rpb24gY29weVNlY3VyZUxpbmsoaWQpIHsNCiAgICBjb25zdCBiYXNlVXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTsNCiAgICBjb25zdCBpbmRleFVybCA9IGJhc2VVcmwucmVwbGFjZSgiYWRtaW4uaHRtbCIsICJpbmRleC5odG1sIik7DQogICAgY29uc3QgbGluayA9IGAke2luZGV4VXJsfT90b2tlbj0ke2lkfWA7DQogICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOw0KICAgIGlucHV0LnZhbHVlID0gbGluazsNCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlucHV0KTsNCiAgICBpbnB1dC5zZWxlY3QoKTsNCiAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgiY29weSIpOw0KICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaW5wdXQpOw0KICAgIGFsZXJ0T25jZSgiTGluayBjb3BpYXRvIG5lZ2xpIGFwcHVudGkhIik7DQogIH0NCg0KICBmdW5jdGlvbiByZXZva2VTZWN1cmVMaW5rKGlkKSB7DQogICAgZGF0YWJhc2UNCiAgICAgIC5yZWYoInNlY3VyZV9saW5rcy8iICsgaWQpDQogICAgICAudXBkYXRlKHsgc3RhdHVzOiAicmV2b2tlZCIsIGV4cGlyYXRpb246IERhdGUubm93KCkgfSkNCiAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgdXBkYXRlQWN0aXZlTGlua3NMaXN0KCk7DQogICAgICAgIHVwZGF0ZUxpbmtTdGF0aXN0aWNzKCk7DQogICAgICAgIGFsZXJ0T25jZSgiTGluayByZXZvY2F0byEiKTsNCiAgICAgIH0pDQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yZSByZXZvY2Egc3UgRmlyZWJhc2U6IiwgZXJyb3IpOw0KICAgICAgICBjb25zdCBzZWN1cmVMaW5rcyA9IEpTT04ucGFyc2UoDQogICAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlY3VyZV9saW5rcyIpIHx8ICJ7fSINCiAgICAgICAgKTsNCiAgICAgICAgaWYgKHNlY3VyZUxpbmtzW2lkXSkgew0KICAgICAgICAgIHNlY3VyZUxpbmtzW2lkXS5zdGF0dXMgPSAicmV2b2tlZCI7DQogICAgICAgICAgc2VjdXJlTGlua3NbaWRdLmV4cGlyYXRpb24gPSBEYXRlLm5vdygpOw0KICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzZWN1cmVfbGlua3MiLCBKU09OLnN0cmluZ2lmeShzZWN1cmVMaW5rcykpOw0KICAgICAgICAgIHVwZGF0ZUFjdGl2ZUxpbmtzTGlzdCgpOw0KICAgICAgICAgIHVwZGF0ZUxpbmtTdGF0aXN0aWNzKCk7DQogICAgICAgICAgYWxlcnRPbmNlKCJMaW5rIHJldm9jYXRvIChsb2NhbGUpISIpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHVwZGF0ZUxpbmtTdGF0aXN0aWNzKCkgew0KICAgIGRhdGFiYXNlDQogICAgICAucmVmKCJzZWN1cmVfbGlua3MiKQ0KICAgICAgLm9uY2UoInZhbHVlIikNCiAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4gew0KICAgICAgICBjb25zdCBsaW5rcyA9IFtdOw0KICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKChjKSA9PiBsaW5rcy5wdXNoKGMudmFsKCkpKTsNCiAgICAgICAgdXBkYXRlU3RhdGlzdGljc1VJKGxpbmtzKTsNCiAgICAgIH0pDQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yZSBzdGF0aXN0aWNoZToiLCBlcnJvcik7DQogICAgICAgIGNvbnN0IHNlY3VyZUxpbmtzID0gSlNPTi5wYXJzZSgNCiAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VjdXJlX2xpbmtzIikgfHwgInt9Ig0KICAgICAgICApOw0KICAgICAgICB1cGRhdGVTdGF0aXN0aWNzVUkoT2JqZWN0LnZhbHVlcyhzZWN1cmVMaW5rcykpOw0KICAgICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiB1cGRhdGVTdGF0aXN0aWNzVUkobGlua3MpIHsNCiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpOw0KICAgIGNvbnN0IHRvdGFsID0gbGlua3MubGVuZ3RoOw0KICAgIGNvbnN0IGFjdGl2ZSA9IGxpbmtzLmZpbHRlcigNCiAgICAgIChsKSA9PiBsLnN0YXR1cyA9PT0gImFjdGl2ZSIgJiYgbC5leHBpcmF0aW9uID4gbm93DQogICAgKS5sZW5ndGg7DQogICAgY29uc3QgdXNlZCA9IGxpbmtzLmZpbHRlcigobCkgPT4gbC5zdGF0dXMgPT09ICJ1c2VkIikubGVuZ3RoOw0KICAgIGNvbnN0IGV4cGlyZWQgPSBsaW5rcy5maWx0ZXIoDQogICAgICAobCkgPT4gbC5zdGF0dXMgPT09ICJleHBpcmVkIiB8fCBsLnN0YXR1cyA9PT0gInJldm9rZWQiDQogICAgKS5sZW5ndGg7DQoNCiAgICBjb25zdCB0b3RhbEVsID0gcXMoInRvdGFsTGlua3MiKTsNCiAgICBjb25zdCBhY3RpdmVFbCA9IHFzKCJhY3RpdmVMaW5rcyIpOw0KICAgIGNvbnN0IHVzZWRFbCA9IHFzKCJ1c2VkTGlua3MiKTsNCiAgICBjb25zdCBleHBpcmVkRWwgPSBxcygiZXhwaXJlZExpbmtzIik7DQoNCiAgICBpZiAodG90YWxFbCkgdG90YWxFbC50ZXh0Q29udGVudCA9IFN0cmluZyh0b3RhbCk7DQogICAgaWYgKGFjdGl2ZUVsKSBhY3RpdmVFbC50ZXh0Q29udGVudCA9IFN0cmluZyhhY3RpdmUpOw0KICAgIGlmICh1c2VkRWwpIHVzZWRFbC50ZXh0Q29udGVudCA9IFN0cmluZyh1c2VkKTsNCiAgICBpZiAoZXhwaXJlZEVsKSBleHBpcmVkRWwudGV4dENvbnRlbnQgPSBTdHJpbmcoZXhwaXJlZCk7DQogIH0NCg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgLy8gQ09OVFJPTExPIFBPUlRFIChTSEVMTFkpDQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICBmdW5jdGlvbiB1cGRhdGVFeHRyYURvb3JzVmlzaWJpbGl0eSgpIHsNCiAgICB0cnkgew0KICAgICAgY29uc3QgZGV2aWNlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImRldmljZXMiKSB8fCAiW10iKTsNCiAgICAgIEFETUlOX0RFVklDRVMuZm9yRWFjaCgoZGV2aWNlLCBpbmRleCkgPT4gew0KICAgICAgICBpZiAoIWRldmljZS5jb250YWluZXJfaWQpIHJldHVybjsNCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcXMoZGV2aWNlLmNvbnRhaW5lcl9pZCk7DQogICAgICAgIGlmICghY29udGFpbmVyKSByZXR1cm47DQogICAgICAgIGNvbnN0IHZpc2libGUgPQ0KICAgICAgICAgIGRldmljZXMubGVuZ3RoID4gaW5kZXggJiYgZGV2aWNlc1tpbmRleF0gJiYgZGV2aWNlc1tpbmRleF0udmlzaWJsZTsNCiAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gImJsb2NrIiA6ICJub25lIjsNCiAgICAgIH0pOw0KICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yZSB2aXNpYmlsaXTDg8KgIHBvcnRlIGV4dHJhOiIsIGUpOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGluaXREb29yQ29udHJvbHMoKSB7DQogICAgdXBkYXRlRXh0cmFEb29yc1Zpc2liaWxpdHkoKTsNCg0KICAgIEFETUlOX0RFVklDRVMuZm9yRWFjaCgoZGV2aWNlKSA9PiB7DQogICAgICBjb25zdCBidXR0b24gPSBxcyhkZXZpY2UuYnV0dG9uX2lkKTsNCiAgICAgIGlmIChidXR0b24pIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IG9wZW5Eb29yKGRldmljZSkpOw0KICAgIH0pOw0KDQogICAgb24oImJ0bk9wZW5BbGxEb29ycyIsICJjbGljayIsIG9wZW5BbGxEb29ycyk7DQogICAgb24oImJ0bkNoZWNrQWxsRG9vcnMiLCAiY2xpY2siLCBjaGVja0FsbERvb3JzU3RhdHVzKTsNCg0KICAgIGNoZWNrQWxsRG9vcnNTdGF0dXMoKTsNCiAgfQ0KDQogIGFzeW5jIGZ1bmN0aW9uIG9wZW5Eb29yKGRldmljZSkgew0KICAgIGNvbnN0IGJ1dHRvbiA9IHFzKGRldmljZS5idXR0b25faWQpOw0KICAgIGNvbnN0IHJlc3VsdERpdiA9IHFzKGRldmljZS5yZXN1bHRfaWQpOw0KDQogICAgaWYgKGJ1dHRvbikgew0KICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPQ0KICAgICAgICAnPGkgY2xhc3M9ImZhcyBmYS1zcGlubmVyIGZhLXNwaW4iPjwvaT4gQXBlcnR1cmEgaW4gY29yc28uLi4nOw0KICAgIH0NCiAgICB1cGRhdGVEb29yU3RhdHVzKGRldmljZSwgIndvcmtpbmciLCAiQXBlcnR1cmEgaW4gY29yc28uLi4iKTsNCg0KICAgIHRyeSB7DQogICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2hXaXRoVGltZW91dCgNCiAgICAgICAgU0hFTExZX0FQSV9VUkwsDQogICAgICAgIHsNCiAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwNCiAgICAgICAgICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIgfSwNCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7DQogICAgICAgICAgICBpZDogZGV2aWNlLmlkLA0KICAgICAgICAgICAgYXV0aF9rZXk6IGRldmljZS5hdXRoX2tleSwNCiAgICAgICAgICAgIGNoYW5uZWw6IDAsDQogICAgICAgICAgICBvbjogdHJ1ZSwNCiAgICAgICAgICAgIHR1cm46ICJvbiIsDQogICAgICAgICAgfSksDQogICAgICAgIH0sDQogICAgICAgIDEyMDAwDQogICAgICApOw0KDQogICAgICBpZiAoIXJlc3Aub2spIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlc3Auc3RhdHVzfSAke3Jlc3Auc3RhdHVzVGV4dH1gKTsNCiAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwLnRleHQoKTsNCiAgICAgIGxldCBkYXRhID0geyBvazogdHJ1ZSB9Ow0KICAgICAgaWYgKHRleHQudHJpbSgpICE9PSAiIikgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHRleHQpOw0KICAgICAgICB9IGNhdGNoIHsNCiAgICAgICAgICAvKiByaXNwb3N0YSBub24gSlNPTiAqLw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGlmIChkYXRhICYmIGRhdGEub2spIHsNCiAgICAgICAgaGFuZGxlRG9vclN1Y2Nlc3MoZGV2aWNlLCByZXN1bHREaXYsICJQb3J0YSBhcGVydGEgY29uIHN1Y2Nlc3NvIik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBoYW5kbGVEb29yU3VjY2VzcygNCiAgICAgICAgICBkZXZpY2UsDQogICAgICAgICAgcmVzdWx0RGl2LA0KICAgICAgICAgICJQb3J0YSBhcGVydGEgKHJpc3Bvc3RhIG5vbiBzdGFuZGFyZCkiLA0KICAgICAgICAgIHRleHQNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgaGFuZGxlRG9vckVycm9yKGRldmljZSwgcmVzdWx0RGl2LCBlcnJvcik7DQogICAgfSBmaW5hbGx5IHsNCiAgICAgIHJlc2V0RG9vckJ1dHRvbihidXR0b24sIGRldmljZSk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gaGFuZGxlRG9vclN1Y2Nlc3MoZGV2aWNlLCByZXN1bHREaXYsIG1lc3NhZ2UsIHJlc3BvbnNlVGV4dCA9ICIiKSB7DQogICAgdXBkYXRlRG9vclN0YXR1cyhkZXZpY2UsICJzdWNjZXNzIiwgbWVzc2FnZSk7DQogICAgaWYgKHJlc3VsdERpdikgew0KICAgICAgcmVzdWx0RGl2LmlubmVySFRNTCA9IGANCiAgICAgICAgPGRpdiBjbGFzcz0ic3VjY2Vzcy1tZXNzYWdlIj4NCiAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNoZWNrLWNpcmNsZSI+PC9pPg0KICAgICAgICAgICR7ZGV2aWNlLm5hbWV9IGFwZXJ0YSBhbGxlICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX0NCiAgICAgICAgICAkew0KICAgICAgICAgICAgcmVzcG9uc2VUZXh0DQogICAgICAgICAgICAgID8gYDxicj48c21hbGw+QVBJOiAke3Jlc3BvbnNlVGV4dC5zdWJzdHJpbmcoMCwgMTAwKX08L3NtYWxsPmANCiAgICAgICAgICAgICAgOiAiIg0KICAgICAgICAgIH0NCiAgICAgICAgPC9kaXY+DQogICAgICBgOw0KICAgIH0NCiAgICBsb2dEb29yQWN0aW9uKGRldmljZS5uYW1lLCAic3VjY2VzcyIsIHJlc3BvbnNlVGV4dCB8fCBtZXNzYWdlKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGhhbmRsZURvb3JFcnJvcihkZXZpY2UsIHJlc3VsdERpdiwgZXJyb3IpIHsNCiAgICB1cGRhdGVEb29yU3RhdHVzKGRldmljZSwgImVycm9yIiwgIkVycm9yZSBuZWxsJ2FwZXJ0dXJhIik7DQogICAgaWYgKHJlc3VsdERpdikgew0KICAgICAgcmVzdWx0RGl2LmlubmVySFRNTCA9IGANCiAgICAgICAgPGRpdiBjbGFzcz0iZXJyb3ItbWVzc2FnZSI+DQogICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1leGNsYW1hdGlvbi1jaXJjbGUiPjwvaT4NCiAgICAgICAgICBFcnJvcmUgYXBlcnR1cmEgJHtkZXZpY2UubmFtZX06ICR7ZXJyb3IubWVzc2FnZX0NCiAgICAgICAgPC9kaXY+DQogICAgICBgOw0KICAgIH0NCiAgICBsb2dEb29yQWN0aW9uKGRldmljZS5uYW1lLCAiZXJyb3IiLCBlcnJvci5tZXNzYWdlKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHJlc2V0RG9vckJ1dHRvbihidXR0b24sIGRldmljZSkgew0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgaWYgKGJ1dHRvbikgew0KICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9DQogICAgICAgICAgJzxpIGNsYXNzPSJmYXMgZmEta2V5Ij48L2k+IEFwcmkgJyArIGRldmljZS5uYW1lLnNwbGl0KCIgIilbMF07DQogICAgICB9DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgY29uc3QgcmVzID0gcXMoZGV2aWNlLnJlc3VsdF9pZCk7DQogICAgICAgIGlmIChyZXMpIHJlcy5pbm5lckhUTUwgPSAiIjsNCiAgICAgIH0sIDUwMDApOw0KICAgIH0sIDMwMDApOw0KICB9DQoNCiAgYXN5bmMgZnVuY3Rpb24gb3BlbkFsbERvb3JzKCkgew0KICAgIGNvbnN0IHJlc3VsdHMgPSBbXTsNCiAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBBRE1JTl9ERVZJQ0VTKSB7DQogICAgICBpZiAoZGV2aWNlLmNvbnRhaW5lcl9pZCkgew0KICAgICAgICBjb25zdCBjID0gcXMoZGV2aWNlLmNvbnRhaW5lcl9pZCk7DQogICAgICAgIGlmIChjICYmIGMuc3R5bGUuZGlzcGxheSA9PT0gIm5vbmUiKSBjb250aW51ZTsNCiAgICAgIH0NCiAgICAgIHRyeSB7DQogICAgICAgIGF3YWl0IG9wZW5Eb29yKGRldmljZSk7DQogICAgICAgIHJlc3VsdHMucHVzaCh7IGRldmljZTogZGV2aWNlLm5hbWUsIHN0YXR1czogInN1Y2Nlc3MiIH0pOw0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICByZXN1bHRzLnB1c2goew0KICAgICAgICAgIGRldmljZTogZGV2aWNlLm5hbWUsDQogICAgICAgICAgc3RhdHVzOiAiZXJyb3IiLA0KICAgICAgICAgIGVycm9yOiBlLm1lc3NhZ2UsDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgMTAwMCkpOw0KICAgIH0NCiAgICBzaG93QnVsa09wZXJhdGlvblJlc3VsdCgiQXBlcnR1cmEgbXVsdGlwbGEgY29tcGxldGF0YSIsIHJlc3VsdHMpOw0KICB9DQoNCiAgZnVuY3Rpb24gY2hlY2tBbGxEb29yc1N0YXR1cygpIHsNCiAgICBBRE1JTl9ERVZJQ0VTLmZvckVhY2goKGRldmljZSkgPT4gew0KICAgICAgaWYgKGRldmljZS5jb250YWluZXJfaWQpIHsNCiAgICAgICAgY29uc3QgYyA9IHFzKGRldmljZS5jb250YWluZXJfaWQpOw0KICAgICAgICBpZiAoYyAmJiBjLnN0eWxlLmRpc3BsYXkgPT09ICJub25lIikgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgY2hlY2tEb29yU3RhdHVzKGRldmljZSk7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBjaGVja0Rvb3JTdGF0dXMoZGV2aWNlKSB7DQogICAgLy8gZXZlbnR1YWxlIGludGVycm9nYXppb25lIHJlYWxlIGRlbGxvIHN0YXRvIChub24gaW1wbGVtZW50YXRhKQ0KICAgIHVwZGF0ZURvb3JTdGF0dXMoZGV2aWNlLCAic3VjY2VzcyIsICJQb3J0YSBkaXNwb25pYmlsZSIpOw0KICB9DQoNCiAgZnVuY3Rpb24gdXBkYXRlRG9vclN0YXR1cyhkZXZpY2UsIHN0YXR1cywgbWVzc2FnZSkgew0KICAgIGNvbnN0IGluZGljYXRvciA9IHFzKGRldmljZS5zdGF0dXNfaWQpOw0KICAgIGNvbnN0IHRleHQgPSBxcyhkZXZpY2Uuc3RhdHVzX3RleHRfaWQpOw0KICAgIGlmIChpbmRpY2F0b3IpIGluZGljYXRvci5jbGFzc05hbWUgPSAic3RhdHVzLWluZGljYXRvciI7DQogICAgaWYgKHRleHQpIHRleHQudGV4dENvbnRlbnQgPSBgU3RhdG86ICR7bWVzc2FnZX1gOw0KICAgIGlmIChpbmRpY2F0b3IpIHsNCiAgICAgIHN3aXRjaCAoc3RhdHVzKSB7DQogICAgICAgIGNhc2UgInN1Y2Nlc3MiOg0KICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCJzdGF0dXMtb24iKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiZXJyb3IiOg0KICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCJzdGF0dXMtb2ZmIik7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIndvcmtpbmciOg0KICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCJzdGF0dXMtd29ya2luZyIpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCJzdGF0dXMtdW5rbm93biIpOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHNob3dCdWxrT3BlcmF0aW9uUmVzdWx0KHRpdGxlLCByZXN1bHRzKSB7DQogICAgY29uc3Qgb2sgPSByZXN1bHRzLmZpbHRlcigocikgPT4gci5zdGF0dXMgPT09ICJzdWNjZXNzIikubGVuZ3RoOw0KICAgIGNvbnN0IGtvID0gcmVzdWx0cy5maWx0ZXIoKHIpID0+IHIuc3RhdHVzID09PSAiZXJyb3IiKS5sZW5ndGg7DQogICAgYWxlcnRPbmNlKA0KICAgICAgYCR7dGl0bGV9XG5cblN1Y2Nlc3NpOiAke29rfVxuRXJyb3JpOiAke2tvfVxuXG5Db250cm9sbGEgaSBsb2cgcGVyIGkgZGV0dGFnbGkuYA0KICAgICk7DQogIH0NCg0KICBmdW5jdGlvbiBsb2dEb29yQWN0aW9uKGRvb3JOYW1lLCBzdGF0dXMsIGVycm9yID0gbnVsbCkgew0KICAgIGNvbnN0IGVudHJ5ID0gew0KICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksDQogICAgICBkb29yOiBkb29yTmFtZSwNCiAgICAgIHN0YXR1cywNCiAgICAgIGVycm9yLA0KICAgICAgYWRtaW46IHRydWUsDQogICAgfTsNCiAgICB0cnkgew0KICAgICAgY29uc3QgbG9ncyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImRvb3JBY3Rpb25Mb2dzIikgfHwgIltdIik7DQogICAgICBsb2dzLnVuc2hpZnQoZW50cnkpOw0KICAgICAgaWYgKGxvZ3MubGVuZ3RoID4gMTAwKSBsb2dzLnNwbGljZSgxMDApOw0KICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImRvb3JBY3Rpb25Mb2dzIiwgSlNPTi5zdHJpbmdpZnkobG9ncykpOw0KICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yZSBzYWx2YXRhZ2dpbyBsb2c6IiwgZSk7DQogICAgfQ0KICB9DQoNCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogIC8vIFNFU1NJT05FIExPQ0FMRSAocmVzZXQpDQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICBmdW5jdGlvbiByZXNldExvY2FsU2Vzc2lvbigpIHsNCiAgICB0cnkgew0KICAgICAgY29uc3QgaW1wb3J0YW50ID0gWw0KICAgICAgICAic2VjcmV0X2NvZGUiLA0KICAgICAgICAibWF4X2NsaWNrcyIsDQogICAgICAgICJ0aW1lX2xpbWl0X21pbnV0ZXMiLA0KICAgICAgICAiY29kZV92ZXJzaW9uIiwNCiAgICAgICAgImNoZWNraW5fc3RhcnRfdGltZSIsDQogICAgICAgICJjaGVja2luX2VuZF90aW1lIiwNCiAgICAgICAgImNoZWNraW5fdGltZV9lbmFibGVkIiwNCiAgICAgICAgImRldmljZXMiLA0KICAgICAgICAic2VjdXJlX2xpbmtzIiwNCiAgICAgICAgImFkbWluQXV0aGVudGljYXRlZCIsDQogICAgICBdOw0KICAgICAgY29uc3QgdG9SZW1vdmUgPSBbXTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGNvbnN0IGsgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpOw0KICAgICAgICBpZiAoayAmJiAhaW1wb3J0YW50LnNvbWUoKHApID0+IGsuc3RhcnRzV2l0aChwKSkpIHRvUmVtb3ZlLnB1c2goayk7DQogICAgICB9DQogICAgICB0b1JlbW92ZS5mb3JFYWNoKChrKSA9PiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrKSk7DQogICAgICBjbGVhclNlc3Npb25Db29raWVzKCk7DQogICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCJhZG1pbl9zZXNzaW9uX3RzIik7DQogICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCJhZG1pbl9zZXNzaW9uX2hhc2giKTsNCiAgICAgIHNob3dSZXNldFJlc3VsdCgpOw0KICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yZSByaXByaXN0aW5vOiIsIGUpOw0KICAgICAgc2hvd1Jlc2V0RXJyb3IoZSk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gY2xlYXJTZXNzaW9uQ29va2llcygpIHsNCiAgICB0cnkgew0KICAgICAgY29uc3QgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgiOyIpOw0KICAgICAgZm9yIChjb25zdCBjIG9mIGNvb2tpZXMpIHsNCiAgICAgICAgY29uc3QgW25hbWVdID0gYy50cmltKCkuc3BsaXQoIj0iKTsNCiAgICAgICAgaWYgKG5hbWUgJiYgIW5hbWUuc3RhcnRzV2l0aCgiYWRtaW5BdXRoZW50aWNhdGVkIikpIHsNCiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM7IHBhdGg9LztgOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSBjYXRjaCAoZSkgew0KICAgICAgY29uc29sZS5lcnJvcigiRXJyb3JlIHB1bGl6aWEgY29va2llOiIsIGUpOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHNob3dSZXNldFJlc3VsdCgpIHsNCiAgICBjb25zdCBlbCA9IHFzKCJsb2NhbFJlc2V0UmVzdWx0Iik7DQogICAgaWYgKCFlbCkgcmV0dXJuOw0KICAgIGVsLmlubmVySFRNTCA9IGANCiAgICAgIDxkaXYgY2xhc3M9InN1Y2Nlc3MtbWVzc2FnZSI+DQogICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtY2hlY2stY2lyY2xlIj48L2k+DQogICAgICAgIFNlc3Npb25lIGxvY2FsZSByaXByaXN0aW5hdGEgY29uIHN1Y2Nlc3NvIQ0KICAgICAgPC9kaXY+DQogICAgICA8ZGl2IGNsYXNzPSJyZXNldC1pbmZvIj4NCiAgICAgICAgPHA+PHN0cm9uZz5BemlvbmkgZXNlZ3VpdGU6PC9zdHJvbmc+PC9wPg0KICAgICAgICA8dWw+DQogICAgICAgICAgPGxpPlB1bGl0aSBkYXRpIGRpIHNlc3Npb25lPC9saT4NCiAgICAgICAgICA8bGk+UHVsaXRpIGNvb2tpZSBkaSBzZXNzaW9uZTwvbGk+DQogICAgICAgICAgPGxpPk1hbnRlbnV0ZSBpbXBvc3RhemlvbmkgZGkgc2lzdGVtYTwvbGk+DQogICAgICAgIDwvdWw+DQogICAgICAgIDxwPk9yYSBwdW9pIHRvcm5hcmUgYWxsYSBzY2hlcm1hdGEgcHJpbmNpcGFsZSBlIGluc2VyaXJlIG51b3ZhbWVudGUgaWwgY29kaWNlLjwvcD4NCiAgICAgIDwvZGl2Pg0KICAgIGA7DQogICAgc2V0VGltZW91dCgoKSA9PiAoZWwuaW5uZXJIVE1MID0gIiIpLCA1MDAwKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHNob3dSZXNldEVycm9yKGVycm9yKSB7DQogICAgY29uc3QgZWwgPSBxcygibG9jYWxSZXNldFJlc3VsdCIpOw0KICAgIGlmICghZWwpIHJldHVybjsNCiAgICBlbC5pbm5lckhUTUwgPSBgDQogICAgICA8ZGl2IGNsYXNzPSJlcnJvci1tZXNzYWdlIj4NCiAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1leGNsYW1hdGlvbi1jaXJjbGUiPjwvaT4NCiAgICAgICAgRXJyb3JlIG5lbCByaXByaXN0aW5vOiAke2Vycm9yLm1lc3NhZ2V9DQogICAgICA8L2Rpdj4NCiAgICBgOw0KICB9DQoNCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogIC8vIEJJTkRJTkcgRVZFTlRJIERPUE8gRE9NQ29udGVudExvYWRlZA0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGFzeW5jICgpID0+IHsNCiAgICBhd2FpdCBsb2FkQWxsb3dlZEFkbWluRW1haWxzKCk7DQoNCiAgICAvLyBBdXRoIHN0YXRlIGxpc3RlbmVyDQogICAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZChhc3luYyAodXNlcikgPT4gew0KICAgICAgaWYgKHVzZXIgJiYgaXNDdXJyZW50VXNlckFkbWluKCkpIHsNCiAgICAgICAgc2hvd0FkbWluSW50ZXJmYWNlKCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAodXNlciAmJiAhaXNDdXJyZW50VXNlckFkbWluKCkpIHsNCiAgICAgICAgICBjb25zb2xlLndhcm4oIlV0ZW50ZSBub24gYXV0b3JpenphdG8iLCB1c2VyLmVtYWlsKTsNCiAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgYXdhaXQgZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKTsNCiAgICAgICAgICB9IGNhdGNoIHt9DQogICAgICAgIH0NCiAgICAgICAgc2hvd0xvZ2luTW9kYWwoKTsNCiAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vIEZvY3VzIGNhbXBvIGVtYWlsL3Bhc3N3b3JkDQogICAgY29uc3QgZW1haWxFbCA9IHFzKCJhZG1pbkVtYWlsIik7DQogICAgY29uc3QgcHcgPSBxcygiYWRtaW5QYXNzd29yZCIpOw0KICAgIGlmIChlbWFpbEVsKSBlbWFpbEVsLmZvY3VzKCk7DQoNCiAgICAvLyBMaXN0ZW5lciBsb2dpbiArIGludmlvDQogICAgb24oImJ0bkxvZ2luIiwgImNsaWNrIiwgaGFuZGxlTG9naW4pOw0KICAgIGlmIChwdykNCiAgICAgIHB3LmFkZEV2ZW50TGlzdGVuZXIoImtleXByZXNzIiwgKGUpID0+IHsNCiAgICAgICAgaWYgKGUua2V5ID09PSAiRW50ZXIiKSBoYW5kbGVMb2dpbigpOw0KICAgICAgfSk7DQogICAgaWYgKGVtYWlsRWwpDQogICAgICBlbWFpbEVsLmFkZEV2ZW50TGlzdGVuZXIoImtleXByZXNzIiwgKGUpID0+IHsNCiAgICAgICAgaWYgKGUua2V5ID09PSAiRW50ZXIiKSBoYW5kbGVMb2dpbigpOw0KICAgICAgfSk7DQoNCiAgICBjb25zdCBsb2dvdXRCdG4gPSBxcygiYnRuTG9nb3V0Iik7DQogICAgaWYgKGxvZ291dEJ0bikNCiAgICAgIGxvZ291dEJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFzeW5jICgpID0+IHsNCiAgICAgICAgYXdhaXQgY2xlYXJBZG1pblNlc3Npb24oKTsNCiAgICAgICAgc2hvd0xvZ2luTW9kYWwoKTsNCiAgICAgIH0pOw0KDQogICAgLy8gSW1wb3N0YXppb25pIGNvZGljZSBzZWdyZXRvDQogICAgb24oImJ0bkNvZGVVcGRhdGUiLCAiY2xpY2siLCB1cGRhdGVTZWNyZXRDb2RlKTsNCg0KICAgIC8vIEltcG9zdGF6aW9uaSBkaSBzaXN0ZW1hDQogICAgb24oImJ0blNldHRpbmdzVXBkYXRlIiwgImNsaWNrIiwgdXBkYXRlU3lzdGVtU2V0dGluZ3MpOw0KDQogICAgLy8gT3JhcmlvIGNoZWNrw6LigqzigJhpbg0KICAgIG9uKCJidG5VcGRhdGVDaGVja2luVGltZSIsICJjbGljayIsIHVwZGF0ZUNoZWNraW5UaW1lKTsNCiAgICBvbigiYnRuVG9nZ2xlQ2hlY2tpblRpbWUiLCAiY2xpY2siLCB0b2dnbGVDaGVja2luVGltZSk7DQoNCiAgICAvLyBQb3J0ZSBleHRyYSB2aXNpYmlsaXTDg8KgDQogICAgb24oImJ0bkV4dHJhRG9vcnNWaXNpYmlsaXR5IiwgImNsaWNrIiwgdXBkYXRlRXh0cmFEb29yc1Zpc2liaWxpdHlTZXR0aW5ncyk7DQoNCiAgICAvLyBMaW5rIHNpY3VyaQ0KICAgIG9uKCJidG5HZW5lcmF0ZVNlY3VyZUxpbmsiLCAiY2xpY2siLCBnZW5lcmF0ZVNlY3VyZUxpbmspOw0KICAgIG9uKCJidG5Db3B5U2VjdXJlTGluayIsICJjbGljayIsIGNvcHlHZW5lcmF0ZWRMaW5rKTsNCg0KICAgIC8vIFJlc2V0IGxvY2FsZQ0KICAgIG9uKCJidG5SZXNldExvY2FsU2Vzc2lvbiIsICJjbGljayIsICgpID0+IHsNCiAgICAgIGlmIChjb25maXJtKCJSaXByaXN0aW5hcmUgbGEgc2Vzc2lvbmUgbG9jYWxlPyIpKSByZXNldExvY2FsU2Vzc2lvbigpOw0KICAgIH0pOw0KDQogICAgLy8gUmVzZXQgZ2xvYmFsZSAoc2UgcHJlc2VudGUgaW4gVUkpDQogICAgY29uc3QgcmVzZXRTZXNzaW9uc0J0biA9IHFzKCJidG5SZXNldFNlc3Npb25zIik7DQogICAgaWYgKHJlc2V0U2Vzc2lvbnNCdG4pIHsNCiAgICAgIHJlc2V0U2Vzc2lvbnNCdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyAoKSA9PiB7DQogICAgICAgIGlmICghY29uZmlybSgiU2Jsb2NjYXJlIGUgcmlwb3J0YXJlIGFsIGxvZ2luIHR1dHRpIGkgY2xpZW50PyIpKSByZXR1cm47DQogICAgICAgIHRyeSB7DQogICAgICAgICAgYXdhaXQgZGF0YWJhc2UucmVmKCJzZXR0aW5ncyIpLnVwZGF0ZSh7DQogICAgICAgICAgICBzZXNzaW9uX3Jlc2V0X3ZlcnNpb246IERhdGUubm93KCksDQogICAgICAgICAgICBnbG9iYWxfdW5ibG9ja19tZXNzYWdlOg0KICAgICAgICAgICAgICAiU2Vzc2lvbmkgcmlwcmlzdGluYXRlIGRhbGwnQW1taW5pc3RyYXRvcmUgw6/Cv8K9IHJpY2FyaWNhIGxhIHBhZ2luYSIsDQogICAgICAgICAgfSk7DQogICAgICAgICAgYWxlcnRPbmNlKCJUdXR0ZSBsZSBzZXNzaW9uaSBzb25vIHN0YXRlIHJpcHJpc3RpbmF0ZS4iKTsNCiAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7DQogICAgICAgICAgYWxlcnRPbmNlKCJFcnJvcmUgbmVsIHJpcHJpc3Rpbm8gZGVsbGUgc2Vzc2lvbmkuIik7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8vIEFnZ2lvcm5hbWVudGkgcGVyaW9kaWNpDQogICAgdXBkYXRlQWN0aXZlTGlua3NMaXN0KCk7DQogICAgdXBkYXRlTGlua1N0YXRpc3RpY3MoKTsNCiAgICBzZXRJbnRlcnZhbCh1cGRhdGVBY3RpdmVMaW5rc0xpc3QsIDYwXzAwMCk7DQogICAgc2V0SW50ZXJ2YWwodXBkYXRlTGlua1N0YXRpc3RpY3MsIDVfMDAwKTsNCiAgfSk7DQoNCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogIC8vIEVTUE9SVEEgRlVOWklPTkkgR0xPQkFMSSAocGVyIGNvbXBhdGliaWxpdMODwqAgY29uIG9uY2xpY2spDQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICBPYmplY3QuYXNzaWduKHdpbmRvdywgew0KICAgIC8vIFV0aWxpdMODwqANCiAgICBxcywNCiAgICBzaGEyNTYsDQogICAgLy8gU2Vzc2lvbmUvYWRtaW4NCiAgICBpc0FkbWluU2Vzc2lvblZhbGlkLA0KICAgIGNsZWFyQWRtaW5TZXNzaW9uLA0KICAgIHNob3dBZG1pbkludGVyZmFjZSwNCiAgICBzaG93TG9naW5Nb2RhbCwNCiAgICBoYW5kbGVMb2dpbiwNCiAgICAvLyBTZXR0aW5ncw0KICAgIHNhdmVTZXR0aW5nVG9GaXJlYmFzZSwNCiAgICBsb2FkU2V0dGluZ3NGcm9tRmlyZWJhc2UsDQogICAgbG9hZFNldHRpbmdzLA0KICAgIGFwcGx5U2V0dGluZ3NGcm9tRmlyZWJhc2UsDQogICAgYXBwbHlTZXR0aW5nc0Zyb21Mb2NhbFN0b3JhZ2UsDQogICAgdXBkYXRlU2VjcmV0Q29kZSwNCiAgICB1cGRhdGVTeXN0ZW1TZXR0aW5ncywNCiAgICAvLyBDaGVja8Oi4oKs4oCYaW4gdGltZQ0KICAgIGxvYWRDaGVja2luVGltZVNldHRpbmdzLA0KICAgIHVwZGF0ZUNoZWNraW5UaW1lLA0KICAgIGlzVmFsaWRUaW1lUmFuZ2UsDQogICAgdG9nZ2xlQ2hlY2tpblRpbWUsDQogICAgLy8gUG9ydGUgZXh0cmENCiAgICBsb2FkRXh0cmFEb29yc1Zpc2liaWxpdHksDQogICAgdXBkYXRlRXh0cmFEb29yc1Zpc2liaWxpdHlTZXR0aW5ncywNCiAgICAvLyBMaW5rIHNpY3VyaQ0KICAgIGdlbmVyYXRlVW5pcXVlSWQsDQogICAgZ2VuZXJhdGVTZWN1cmVMaW5rLA0KICAgIHNhdmVTZWN1cmVMaW5rLA0KICAgIGNvcHlHZW5lcmF0ZWRMaW5rLA0KICAgIHVwZGF0ZUFjdGl2ZUxpbmtzTGlzdCwNCiAgICByZW5kZXJBY3RpdmVMaW5rcywNCiAgICBjcmVhdGVMaW5rRWxlbWVudCwNCiAgICBjb3B5U2VjdXJlTGluaywNCiAgICByZXZva2VTZWN1cmVMaW5rLA0KICAgIHVwZGF0ZUxpbmtTdGF0aXN0aWNzLA0KICAgIHVwZGF0ZVN0YXRpc3RpY3NVSSwNCiAgICAvLyBQb3J0ZSBTaGVsbHkNCiAgICBpbml0RG9vckNvbnRyb2xzLA0KICAgIHVwZGF0ZUV4dHJhRG9vcnNWaXNpYmlsaXR5LA0KICAgIG9wZW5Eb29yLA0KICAgIGhhbmRsZURvb3JTdWNjZXNzLA0KICAgIGhhbmRsZURvb3JFcnJvciwNCiAgICByZXNldERvb3JCdXR0b24sDQogICAgb3BlbkFsbERvb3JzLA0KICAgIGNoZWNrQWxsRG9vcnNTdGF0dXMsDQogICAgY2hlY2tEb29yU3RhdHVzLA0KICAgIHVwZGF0ZURvb3JTdGF0dXMsDQogICAgc2hvd0J1bGtPcGVyYXRpb25SZXN1bHQsDQogICAgbG9nRG9vckFjdGlvbiwNCiAgICAvLyBTZXNzaW9uZSBsb2NhbGUNCiAgICByZXNldExvY2FsU2Vzc2lvbiwNCiAgICBjbGVhclNlc3Npb25Db29raWVzLA0KICAgIHNob3dSZXNldFJlc3VsdCwNCiAgICBzaG93UmVzZXRFcnJvciwNCiAgfSk7DQp9KSgpOw0K');